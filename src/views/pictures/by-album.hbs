<h1>Manage pictures</h1>
<h3>Album: {{album.title}}</h3>
<p>
  <a href="/">Back to categories</a>
</p>
<hr>
<form action="/pictures/upload" method="post" enctype="multipart/form-data">
  <label>Upload pictures</label>
  <input id="albumId" type="hidden" name="albumId" value="{{album.id}}">
  <input type="file" name="pictures" accept="image/*" multiple>
  <button type="submit">Upload</button>
</form>
<hr>
<div class="gallery">
  {{#each album.pictures}}
  <div>
    <img src="/uploads/{{fileNameThumbnail}}" />
    <div>
      <button class="btnSetAsAlbumCover" value="{{id}}">Album cover</button>
      <button class="btndeletePicture" value="{{id}}" onclick="deletePicture(event)">Delete</button>
    </div>
  </div>
  {{/each}}
</div>

<script>
  function deletePicture(e) {
    const picId = e.target.value;
    if (!picId) return;

    if (confirm("Confirm picture delete?")) {
      fetch('http://localhost:5000/pictures/delete', {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ picId })
      }).then((e) =>Â location.reload());
    }
  }
</script>
